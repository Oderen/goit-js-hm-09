{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAO,CACXC,KAAMC,SAASC,cAAc,SAC7BC,WAAYF,SAASC,cAAc,uBACnCE,aAAcH,SAASC,cAAc,sBACrCG,OAAQJ,SAASC,cAAc,yBAG7BI,EAAc,EACdC,EAAmB,EAyDvB,SAASC,EAASC,GACf,OAAOC,EAAAb,GAASc,OAAOC,QAAQ,GAAUC,OAAPJ,G,CAGrC,SAASK,EAAUC,GACjB,OAAOL,EAAAb,GAASc,OAAOK,QAAQ,GAASH,OAANE,G,CA3DpChB,EAAKC,KAAKiB,iBAAiB,UAAU,SAACC,GACpCA,EAAEC,iBAEF,IAAMhB,EAAaiB,OAAOrB,EAAKI,WAAWkB,OACpChB,EAASe,OAAOrB,EAAKM,OAAOgB,OAC5BjB,EAAegB,OAAOrB,EAAKK,aAAaiB,OAExCC,EAAaC,aAAY,WAE7BjB,GAAe,EACfkB,QAAQC,IAAI,mBAAiCnB,GAChC,IAAPoB,EAAWpB,EAEG,IAAhBA,GACFC,EAAmBJ,EACnBqB,QAAQC,IAAI,qBAAsBlB,KAElCA,GAAqBJ,EAAaC,EAClCoB,QAAQC,IAAI,qBAAsBlB,IAkBxC,SAAuBmB,EAAUvB,EAAYwB,GAK3C,OAJAH,QAAQC,IAAI,aAAc,GAAYZ,OAATa,IAC7BF,QAAQC,IAAI,qBAAsB,GAAoBZ,OAAjBc,IACrCH,QAAQC,IAAI,gBAAiB,GAAcZ,OAAXV,IAEzB,IAAIyB,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAgBC,KAAKC,SAAW,GAEtCC,YAAW,WACPH,EACJF,EAAQ,uBAAwChB,OAAfa,EAAS,QAAuBb,OAAjBc,EAAiB,OAE/DG,EAAK,sBAAqCjB,OAAfa,EAAS,QAAuBb,OAAjBc,EAAiB,M,GAE1DxB,E,IA7BHgC,CAAcT,EAAUvB,EAAYI,GACjC6B,KAAK5B,GACL6B,MAAMvB,GAELR,IAAgBD,IAClBK,EAAAb,GAASc,OAAO2B,KAAK,mBACPhC,EAAA,EACdC,EAAmB,EACnBgC,cAAcjB,G,GAEflB,E","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  firstDelay: document.querySelector('input[name=\"delay\"]'),\n  regularDelay: document.querySelector('input[name=\"step\"]'),\n  amount: document.querySelector('input[name=\"amount\"]'),\n};\n\nlet countNumber = 0;\nlet totalMiliSeconds = 0;\nlet firstIteration = true;\n\nrefs.form.addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  const firstDelay = Number(refs.firstDelay.value);\n  const amount = Number(refs.amount.value);\n  const regularDelay = Number(refs.regularDelay.value);\n\n  const intervalID = setInterval(() => {\n    \n    countNumber += 1;\n    console.log('Номер ітерації: ', countNumber);\n    const position = countNumber;\n\n    if (countNumber === 1) {\n      totalMiliSeconds = firstDelay;\n      console.log('totalMiliSeconds: ', totalMiliSeconds);\n    } else {\n      totalMiliSeconds += (firstDelay + regularDelay);\n      console.log('totalMiliSeconds: ', totalMiliSeconds);\n    }\n    \n    createPromise(position, firstDelay, totalMiliSeconds)\n      .then(OnSucess)\n      .catch(OnFailure);\n\n    if (countNumber === amount) {\n      Notiflix.Notify.info('Цикл завершився');\n      countNumber = 0;\n      totalMiliSeconds = 0;\n      clearInterval(intervalID);\n    }\n  }, regularDelay);\n  \n}\n);\n\nfunction createPromise(position, firstDelay, totalMiliSeconds) {\n  console.log('position: ', `${position}`);\n  console.log('totalMiliSeconds: ', `${totalMiliSeconds}`);\n  console.log('First Delay: ', `${firstDelay}`);\n  \n  return new Promise((resolve, reject) => { \n    const shouldResolve = Math.random() > 0.3;\n    \n    setTimeout(() => { \n    if (shouldResolve) {\n    resolve(`✅ Fulfilled promise ${position} in ${totalMiliSeconds}ms`);\n  } else {\n    reject(`❌ Rejected promise ${position} in ${totalMiliSeconds}ms`);\n      }\n    }, firstDelay);\n  });\n};\n\nfunction OnSucess(result) {\n   return Notiflix.Notify.success(`${result}`);\n};\n\nfunction OnFailure(error) {\n  return Notiflix.Notify.failure(`${error}`);\n};\n\n\n"],"names":["$6JpON","parcelRequire","$ce04d3a99e08e73b$var$refs","form","document","querySelector","firstDelay","regularDelay","amount","$ce04d3a99e08e73b$var$countNumber","$ce04d3a99e08e73b$var$totalMiliSeconds","$ce04d3a99e08e73b$var$OnSucess","result","$parcel$interopDefault","Notify","success","concat","$ce04d3a99e08e73b$var$OnFailure","error","failure","addEventListener","e","preventDefault","Number","value","intervalID","setInterval","console","log","position","totalMiliSeconds1","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","$ce04d3a99e08e73b$var$createPromise","then","catch","info","clearInterval"],"version":3,"file":"03-promises.3ff7e359.js.map"}