{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,SAC7BC,WAAYF,SAASC,cAAc,uBACnCE,aAAcH,SAASC,cAAc,sBACrCG,OAAQJ,SAASC,cAAc,yBAGjC,IAAII,EAAc,EACdC,EAAmB,EAyDvB,SAASC,EAASC,GACf,OAAOC,EAAAb,GAASc,OAAOC,QAAQ,GAAGH,I,CAGrC,SAASI,EAAUC,GACjB,OAAOJ,EAAAb,GAASc,OAAOI,QAAQ,GAAGD,I,CA3DpCf,EAAKC,KAAKgB,iBAAiB,UAAWC,IACpCA,EAAEC,iBAEF,MAAMf,EAAagB,OAAOpB,EAAKI,WAAWiB,OACpCf,EAASc,OAAOpB,EAAKM,OAAOe,OAC5BhB,EAAee,OAAOpB,EAAKK,aAAagB,OAExCC,EAAaC,aAAY,KAE7BhB,GAAe,EACfiB,QAAQC,IAAI,mBAAiClB,GAChC,MAAPmB,EAAWnB,EAEG,IAAhBA,GACFC,EAAmBJ,EACnBoB,QAAQC,IAAI,qBAAsBjB,KAElCA,GAAqBJ,EAAaC,EAClCmB,QAAQC,IAAI,qBAAsBjB,IAkBxC,SAAuBkB,EAAUtB,EAAYuB,GAK3C,OAJAH,QAAQC,IAAI,aAAc,GAAGC,KAC7BF,QAAQC,IAAI,qBAAsB,GAAGE,KACrCH,QAAQC,IAAI,gBAAiB,GAAGrB,KAEzB,IAAIwB,SAAQ,CAACC,EAASC,KAC3B,MAAMC,EAAgBC,KAAKC,SAAW,GAEtCC,YAAW,KACPH,EACJF,EAAQ,uBAAqBH,QAAiBC,OAE5CG,EAAK,sBAAoBJ,QAAeC,MAAqB,GAE5DvB,EAAW,G,CA7Bd+B,CAAcT,EAAUtB,EAAYI,GACjC4B,KAAK3B,GACL4B,MAAMvB,GAELP,IAAgBD,IAClBK,EAAAb,GAASc,OAAO0B,KAAK,mBACP/B,EAAA,EACdC,EAAmB,EACnB+B,cAAcjB,G,GAEfjB,EAAa","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  firstDelay: document.querySelector('input[name=\"delay\"]'),\n  regularDelay: document.querySelector('input[name=\"step\"]'),\n  amount: document.querySelector('input[name=\"amount\"]'),\n};\n\nlet countNumber = 0;\nlet totalMiliSeconds = 0;\nlet firstIteration = true;\n\nrefs.form.addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  const firstDelay = Number(refs.firstDelay.value);\n  const amount = Number(refs.amount.value);\n  const regularDelay = Number(refs.regularDelay.value);\n\n  const intervalID = setInterval(() => {\n    \n    countNumber += 1;\n    console.log('Номер ітерації: ', countNumber);\n    const position = countNumber;\n\n    if (countNumber === 1) {\n      totalMiliSeconds = firstDelay;\n      console.log('totalMiliSeconds: ', totalMiliSeconds);\n    } else {\n      totalMiliSeconds += (firstDelay + regularDelay);\n      console.log('totalMiliSeconds: ', totalMiliSeconds);\n    }\n    \n    createPromise(position, firstDelay, totalMiliSeconds)\n      .then(OnSucess)\n      .catch(OnFailure);\n\n    if (countNumber === amount) {\n      Notiflix.Notify.info('Цикл завершився');\n      countNumber = 0;\n      totalMiliSeconds = 0;\n      clearInterval(intervalID);\n    }\n  }, regularDelay);\n  \n}\n);\n\nfunction createPromise(position, firstDelay, totalMiliSeconds) {\n  console.log('position: ', `${position}`);\n  console.log('totalMiliSeconds: ', `${totalMiliSeconds}`);\n  console.log('First Delay: ', `${firstDelay}`);\n  \n  return new Promise((resolve, reject) => { \n    const shouldResolve = Math.random() > 0.3;\n    \n    setTimeout(() => { \n    if (shouldResolve) {\n    resolve(`✅ Fulfilled promise ${position} in ${totalMiliSeconds}ms`);\n  } else {\n    reject(`❌ Rejected promise ${position} in ${totalMiliSeconds}ms`);\n      }\n    }, firstDelay);\n  });\n};\n\nfunction OnSucess(result) {\n   return Notiflix.Notify.success(`${result}`);\n};\n\nfunction OnFailure(error) {\n  return Notiflix.Notify.failure(`${error}`);\n};\n\n\n"],"names":["$7Y9D8","parcelRequire","$47d4ff9957288465$var$refs","form","document","querySelector","firstDelay","regularDelay","amount","$47d4ff9957288465$var$countNumber","$47d4ff9957288465$var$totalMiliSeconds","$47d4ff9957288465$var$OnSucess","result","$parcel$interopDefault","Notify","success","$47d4ff9957288465$var$OnFailure","error","failure","addEventListener","e","preventDefault","Number","value","intervalID","setInterval","console","log","position","totalMiliSeconds1","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","$47d4ff9957288465$var$createPromise","then","catch","info","clearInterval"],"version":3,"file":"03-promises.92a3850f.js.map"}